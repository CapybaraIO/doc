"use strict";(self.webpackChunk_hirosystems_docs=self.webpackChunk_hirosystems_docs||[]).push([[5729],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},d="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(n),p=r,m=d["".concat(c,".").concat(p)]||d[p]||k[p]||i;return n?a.createElement(m,l(l({ref:t},u),{},{components:n})):a.createElement(m,l({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=p;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[d]="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},38908:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>k,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const i={id:"stacking-using-cli",title:"Stacking using the Stacks CLI"},l=void 0,o={unversionedId:"tutorials/stacking-using-cli",id:"tutorials/stacking-using-cli",title:"Stacking using the Stacks CLI",description:"Introduction",source:"@site/docs/tutorials/stacking-using-cli.md",sourceDirName:"tutorials",slug:"/tutorials/stacking-using-cli",permalink:"/tutorials/stacking-using-cli",draft:!1,editUrl:"https://github.com/hirosystems/docs/tree/main/docs/tutorials/stacking-using-cli.md",tags:[],version:"current",frontMatter:{id:"stacking-using-cli",title:"Stacking using the Stacks CLI"},sidebar:"tutorials",previous:{title:"Sending tokens",permalink:"/tutorials/sending-tokens"},next:{title:"Hello, world",permalink:"/tutorials/clarity-hello-world"}},c={},s=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Generate An Account",id:"generate-an-account",level:2},{value:"Get Testnet Tokens Using The Faucet",id:"get-testnet-tokens-using-the-faucet",level:2},{value:"Check Balance",id:"check-balance",level:2},{value:"Check Stacking Eligibility",id:"check-stacking-eligibility",level:2},{value:"Perform Stacking action",id:"perform-stacking-action",level:2},{value:"Checking Stacking Status",id:"checking-stacking-status",level:2}],u={toc:s},d="wrapper";function k(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial, you'll learn how to use the Stacks CLI to participate in Stacking. The CLI is a great way to quickly try out Stacking on testnet. To integrate Stacking into your application, see the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.hiro.so/build-apps/integrate-stacking"},"Stacking integration guide"),"."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"First, you'll need to understand the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.stacks.co/understand-stacks/stacking"},"Stacking mechanism"),"."),(0,r.kt)("p",null,"You'll also need ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/"},"NodeJS")," ",(0,r.kt)("inlineCode",{parentName:"p"},"12.10.0")," or higher to complete this tutorial. You can verify your installation by opening up your terminal and run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"node --version\n")),(0,r.kt)("p",null,"You will also need to install the Stacks CLI from NPM:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @stacks/cli -g\n")),(0,r.kt)("h2",{id:"generate-an-account"},"Generate An Account"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"stx make_keychain -t\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "mnemonic": "turn food juice small swing junior trip crouch slot wood nephew own tourist hazard tomato follow trust just project traffic spirit oil diary blue",\n  "keyInfo": {\n    "privateKey": "dca82f838f6e5a893cffc8efe861196252373a5b8b62c0b55ba3a0a7a28795d301",\n    "address": "ST1P3HXR80TKT48TKM2VTKCDBS4ET9396W0W2S3K8",\n    "btcAddress": "mqPBWmSGJhrA9x5XJC6qJtFsHnudqZ2XJU",\n    "index": 0\n  }\n}\n')),(0,r.kt)("p",null,"We'll be using this testnet key pair to perform Stacking. But first we'll need to get some testnet tokens."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you're Stacking on mainnet, make sure you have an account with sufficient number of Stacks tokens to participate.")),(0,r.kt)("h2",{id:"get-testnet-tokens-using-the-faucet"},"Get Testnet Tokens Using The Faucet"),(0,r.kt)("p",null,"Use the following ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," command to request tokens from the testnet node's faucet endpoint."),(0,r.kt)("p",null,"We use the address generated above as a parameter."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X POST https://api.testnet.hiro.so/extended/v1/faucets/stx?address=ST1P3HXR80TKT48TKM2VTKCDBS4ET9396W0W2S3K8&stacking=true\n")),(0,r.kt)("h2",{id:"check-balance"},"Check Balance"),(0,r.kt)("p",null,"Confirm that the faucet transaction has completed by checking the balance of your address. The ",(0,r.kt)("inlineCode",{parentName:"p"},"-t")," flag is used to indicate testnet. See the ",(0,r.kt)("a",{parentName:"p",href:"/references/stacks-cli"},"CLI reference")," for usage of flags."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'stx balance ST1P3HXR80TKT48TKM2VTKCDBS4ET9396W0W2S3K8 -t\n\n{\n  "balance": "90000000000000",\n  "locked": "0",\n  "unlock_height": 0,\n  "nonce": 0\n}\n')),(0,r.kt)("h2",{id:"check-stacking-eligibility"},"Check Stacking Eligibility"),(0,r.kt)("p",null,"Before we send the Stacking transaction, we will need to check if we're eligible for Stacking."),(0,r.kt)("p",null,"This check ensures that we meet the minimum threshold amount of STX required in order to participate in Stacking."),(0,r.kt)("p",null,"The arguments required for the ",(0,r.kt)("inlineCode",{parentName:"p"},"can_stack")," command are:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Amount")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount to stack in microstacks, we'll use the entire balance in our account"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"90000000000000"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Reward cycles")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of reward cycles to lock up your tokens for Stacking"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"10"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BTC Address")),(0,r.kt)("td",{parentName:"tr",align:null},"BTC address to receive Stacking rewards. We can use any valid BTC address"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"mqkccNX5h7Xy1YUku3X2fCFCC54x6HEiHk"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"STX Address")),(0,r.kt)("td",{parentName:"tr",align:null},"The address that we will be Stacking with. We'll use the address generated previously"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ST1P3HXR80TKT48TKM2VTKCDBS4ET9396W0W2S3K8"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"stx can_stack 90000000000000 10 mqkccNX5h7Xy1YUku3X2fCFCC54x6HEiHk ST1P3HXR80TKT48TKM2VTKCDBS4ET9396W0W2S3K8 -t\n\n{ eligible: true }\n")),(0,r.kt)("p",null,"If we meet the conditions to participate in Stacking, the command will return true."),(0,r.kt)("h2",{id:"perform-stacking-action"},"Perform Stacking action"),(0,r.kt)("p",null,"Next, we will perform the Stacking transaction using the ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," command."),(0,r.kt)("p",null,"We need the following 4 arguments:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Amount")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount to stack in microstacks"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"90000000000000"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Reward cycles")),(0,r.kt)("td",{parentName:"tr",align:null},"Number of reward cycles to lock up your tokens for Stacking"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"10"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BTC Address")),(0,r.kt)("td",{parentName:"tr",align:null},"BTC address to receive Stacking rewards. This is also referred to as the PoX address."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"mqkccNX5h7Xy1YUku3X2fCFCC54x6HEiHk"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Private Key")),(0,r.kt)("td",{parentName:"tr",align:null},"The private key to the address we're Stacking with, which we generated previously"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dca82f838f6e5a893cffc8efe861196252373a5b8b62c0b55ba3a0a7a28795d301"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"stx stack 90000000000000 10 mqkccNX5h7Xy1YUku3X2fCFCC54x6HEiHk dca82f838f6e5a893cffc8efe861196252373a5b8b62c0b55ba3a0a7a28795d301 -t\n\n{\n  txid: '0x2e33ad647a9cedacb718ce247967dc705bc0c878db899fdba5eae2437c6fa1e1',\n  transaction: 'https://explorer.hiro.so/txid/0x2e33ad647a9cedacb718ce247967dc705bc0c878db899fdba5eae2437c6fa1e1'\n}\n")),(0,r.kt)("p",null,"If the commands completes successfully, we'll get back a TXID and a URL to the block explorer showing the transaction status."),(0,r.kt)("p",null,"Now we should wait until the transaction is confirmed. This usually takes a few minutes."),(0,r.kt)("h2",{id:"checking-stacking-status"},"Checking Stacking Status"),(0,r.kt)("p",null,"Once the transaction has been confirmed, we can check the Stacking status using the ",(0,r.kt)("inlineCode",{parentName:"p"},"stacking_status")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"stx stacking_status ST1P3HXR80TKT48TKM2VTKCDBS4ET9396W0W2S3K8 -t\n\n{\n  amount_microstx: '90000000000000',\n  first_reward_cycle: 25,\n  lock_period: 10,\n  unlock_height: 3960,\n  pox_address: {\n    version: '00',\n    hashbytes: '05cf52a44bf3e6829b4f8c221cc675355bf83b7d'\n  }\n}\n")),(0,r.kt)("p",null,"Here we can see how many microstacks are locked and when they will unlock."),(0,r.kt)("p",null,"Congratulations you have learned how to Stack using the CLI. To integrate Stacking into your app, check out the ",(0,r.kt)("a",{parentName:"p",href:"/build-apps/integrate-stacking"},"Stacking integration guide"),"."))}k.isMDXComponent=!0}}]);