"use strict";(self.webpackChunk_hirosystems_docs=self.webpackChunk_hirosystems_docs||[]).push([[2393],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),d=r,h=u["".concat(c,".").concat(d)]||u[d]||m[d]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},62122:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={title:"Set up local Development Environment"},i=void 0,l={unversionedId:"clarinet/guides/how-to-set-up-local-development-environment",id:"clarinet/guides/how-to-set-up-local-development-environment",title:"Set up local Development Environment",description:"Developing a Clarity smart contract",source:"@site/docs/clarinet/guides/how-to-set-up-local-development-environment.md",sourceDirName:"clarinet/guides",slug:"/clarinet/guides/how-to-set-up-local-development-environment",permalink:"/clarinet/guides/how-to-set-up-local-development-environment",draft:!1,editUrl:"https://github.com/hirosystems/docs/tree/main/docs/clarinet/guides/how-to-set-up-local-development-environment.md",tags:[],version:"current",frontMatter:{title:"Set up local Development Environment"},sidebar:"clarinet",previous:{title:"Deploy Clarinet with Subnets",permalink:"/clarinet/guides/how-to-deploy-with-subnets"},next:{title:"Customize Deployment",permalink:"/clarinet/guides/how-to-use-deployment-plans"}},c={},s=[{value:"Developing a Clarity smart contract",id:"developing-a-clarity-smart-contract",level:2},{value:"Develop a smart contract",id:"develop-a-smart-contract",level:2},{value:"Set clarity version of contract",id:"set-clarity-version-of-contract",level:3},{value:"Testing with Clarinet",id:"testing-with-clarinet",level:2},{value:"Testing with the console",id:"testing-with-the-console",level:3},{value:"Testing smart contracts",id:"testing-smart-contracts",level:3},{value:"Additional reading",id:"additional-reading",level:2}],p={toc:s},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"developing-a-clarity-smart-contract"},"Developing a Clarity smart contract"),(0,r.kt)("p",null,"This article helps you with creating a new project and develop a clarity smart contract."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Topics covered in this guide"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#develop-a-smart-contract"},"Develop a clarity smart contract")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#testing-with-clarinet"},"Test and interact with smart contracts"))),(0,r.kt)("h2",{id:"develop-a-smart-contract"},"Develop a smart contract"),(0,r.kt)("p",null,"Once you have installed Clarinet, you can begin a new Clarinet project with the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"clarinet new my-project && cd my-project\n")),(0,r.kt)("p",null,"This command creates a new directory and populates it with boilerplate configuration and testing files. The ",(0,r.kt)("inlineCode",{parentName:"p"},"toml")," files\nin the ",(0,r.kt)("inlineCode",{parentName:"p"},"settings")," directory control the Clarinet environment. For example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Devnet.toml")," file contains\ndefinitions for wallets in the local REPL environment and their starting balances (in STX)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'...\n[accounts.deployer]\nmnemonic = "fetch outside black test wash cover just actual execute nice door want airport betray quantum stamp fish act pen trust portion fatigue scissors vague"\nbalance = 1_000_000\n\n[accounts.wallet_1]\nmnemonic = "spoil sock coyote include verify comic jacket gain beauty tank flush victory illness edge reveal shallow plug hobby usual juice harsh pact wreck eight"\nbalance = 1_000_000\n\n[accounts.wallet_2]\nmnemonic = "arrange scale orient half ugly kid bike twin magnet joke hurt fiber ethics super receive version wreck media fluid much abstract reward street alter"\nbalance = 1_000_000\n...\n')),(0,r.kt)("p",null,"You can create a new contract in the project with the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"clarinet contract new my-contract\n")),(0,r.kt)("p",null,"This command creates a new ",(0,r.kt)("inlineCode",{parentName:"p"},"my-contract.clar")," file in the ",(0,r.kt)("inlineCode",{parentName:"p"},"contracts")," directory and a ",(0,r.kt)("inlineCode",{parentName:"p"},"my-contract_test.ts")," in the\n",(0,r.kt)("inlineCode",{parentName:"p"},"tests")," directory. Additionally, it adds the contract to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Clarinet.toml")," configuration file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[contracts.my-contract]\npath = "contracts/my-contract.clar"\n')),(0,r.kt)("h3",{id:"set-clarity-version-of-contract"},"Set clarity version of contract"),(0,r.kt)("p",null,"You can specify the clarity version of your contract in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Clarinet.toml")," configuration file by updating it as shown below."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[contracts.cbtc-token]\npath = "contracts/cbtc-token.clar"\nclarity_version = 1\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[contracts.cbtc-token]\npath = "contracts/cbtc-token.clar"\nclarity_version = 2\n')),(0,r.kt)("p",null,"At this point, you can begin editing your smart contract in the ",(0,r.kt)("inlineCode",{parentName:"p"},"contracts")," directory. At any point, while you are developing, you can use the command ",(0,r.kt)("inlineCode",{parentName:"p"},"clarinet check")," to check the syntax of your smart contract.\nIf you are using VSCode, the ",(0,r.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=HiroSystems.clarity-lsp"},"Clarity extension")," does the check for you."),(0,r.kt)("p",null,"Review this comprehensive walkthrough video for a more in-depth overview of developing with Clarinet."),(0,r.kt)("br",null),(0,r.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/zERDftjl6k8",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),(0,r.kt)("h2",{id:"testing-with-clarinet"},"Testing with Clarinet"),(0,r.kt)("p",null,"Clarinet provides several powerful methods to test and interact with your smart contracts. As mentioned in the previous\nsection, you can always check your Clarity syntax using the ",(0,r.kt)("inlineCode",{parentName:"p"},"clarinet check")," command. This validates any smart contracts\nyou are currently developing in the active project."),(0,r.kt)("p",null,"You can use two tools in Clarinet to test smart contracts: the console, an interactive Clarity REPL, and the test harness, a testing framework written in Typescript.\nWhen developing a new smart contract using local Clarity REPL, you can exercise a contract without waiting for block times in a live blockchain."),(0,r.kt)("h3",{id:"testing-with-the-console"},"Testing with the console"),(0,r.kt)("p",null,"The Clarinet console is an interactive Clarity REPL that runs in memory. Any contracts configured in the current project are automatically loaded into memory. Additionally, wallets defined in the ",(0,r.kt)("inlineCode",{parentName:"p"},"settings/Devnet.toml")," file are initialized with STX tokens for testing purposes. When the console runs, it provides a summary of the deployed contracts, their public functions, wallet addresses, and balances."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'clarity-repl v0.11.0\nEnter "::help" for usage hints.\nConnected to a transient in-memory database.\nInitialized contracts\n+-------------------------------------------------------+-------------------------+\n| Contract identifier                                   | Public functions        |\n+-------------------------------------------------------+-------------------------+\n| ST1HTBVD3JG9C05J7HBJTHGR0GGW7KXW28M5JS8QE.my-contract | (echo-number (val int)) |\n|                                                       | (say-hi)                |\n+-------------------------------------------------------+-------------------------+\n\nInitialized balances\n+------------------------------------------------------+---------+\n| Address                                              | STX     |\n+------------------------------------------------------+---------+\n| ST1HTBVD3JG9C05J7HBJTHGR0GGW7KXW28M5JS8QE (deployer) | 1000000 |\n+------------------------------------------------------+---------+\n| ST1J4G6RR643BCG8G8SR6M2D9Z9KXT2NJDRK3FBTK (wallet_1) | 1000000 |\n+------------------------------------------------------+---------+\n...\n')),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"::help")," command for valid console commands."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},">> ::help\n::help                                  Display help\n::functions                             Display all the native functions available in clarity\n::keywords                              Display all the native keywords available in clarity\n::describe <function> | <keyword>       Display documentation for a given native function or keyword\n::mint_stx <principal> <amount>         Mint STX balance for a given principal\n::set_tx_sender <principal>             Set tx-sender variable to principal\n::get_assets_maps                       Get assets maps for active accounts\n::get_costs <expr>                      Display the cost analysis\n::get_contracts                         Get contracts\n::get_block_height                      Get current block height\n::advance_chain_tip <count>             Simulate mining of <count> blocks\n::set_epoch <2.0> | <2.05> | <2.1>      Update the current epoch\n::get_epoch                             Get current epoch\n::toggle_costs                          Display cost analysis after every expression\n::debug <expr>                          Start an interactive debug session executing <expr>\n::trace <expr>                          Generate an execution trace for <expr>\n::reload                                Reload the existing contract(s) in the session\n::read <filename>                       Read expressions from a file\n::encode <expr>                         Encode an expression to a Clarity Value bytes representation\n::decode <bytes>                        Decode a Clarity Value bytes representation\n")),(0,r.kt)("p",null,"The console commands control the REPL chain's state, letting you get information about it and advance the chain\ntip. Additionally, you can enter Clarity commands into the console and observe the result of the command. The\n",(0,r.kt)("inlineCode",{parentName:"p"},"::list_functions")," console command prints a cheat sheet of Clarity commands. For example, in the example contract,\nyou could use the REPL to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"echo-number")," function in the contract with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},">> (contract-call? .my-contract echo-number 42)\n(ok 42)\n")),(0,r.kt)("p",null,"Note that by default, commands are always executed as the ",(0,r.kt)("inlineCode",{parentName:"p"},"deployer")," address, which means you can use the shorthand\n",(0,r.kt)("inlineCode",{parentName:"p"},".my-contract")," without specifying a full address to the contract. If you changed the transaction address with the\n",(0,r.kt)("inlineCode",{parentName:"p"},"::set_tx_sender")," command, you would need to provide the full address to the contract in the contract call\n(",(0,r.kt)("inlineCode",{parentName:"p"},"ST1HTBVD3JG9C05J7HBJTHGR0GGW7KXW28M5JS8QE.my-contract"),")."),(0,r.kt)("p",null,"You can refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.stacks.co/docs/clarity/language-functions"},"Clarity language reference")," for a complete overview of all Clarity functions."),(0,r.kt)("h3",{id:"testing-smart-contracts"},"Testing smart contracts"),(0,r.kt)("p",null,"Smart contracts can best tested with Node.js and Vitest thanks to the clarinet-sdk. See the ",(0,r.kt)("a",{parentName:"p",href:"/clarinet/guides/test-contract-with-clarinet-sdk"},"testing guide")," to learn more."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"clarinet test")," is now depracated and the recommended way is to use the JS SDK.")),(0,r.kt)("h2",{id:"additional-reading"},"Additional reading"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/hirosystems/clarinet#clarinet"},"Clarinet README")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/hirosystems/clarinet"},"clarinet repository")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.stacks.co/references/language-functions"},"Clarity language reference")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@hirosystems/clarinet-sdk"},"Clarinet SDK")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://marketplace.visualstudio.com/items?itemName=HiroSystems.clarity-lsp"},"Clarity VSCode extension"))))}m.isMDXComponent=!0}}]);