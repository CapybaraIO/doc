"use strict";(self.webpackChunk_hirosystems_docs=self.webpackChunk_hirosystems_docs||[]).push([[21],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(n),u=i,k=h["".concat(l,".").concat(u)]||h[u]||d[u]||r;return n?a.createElement(k,o(o({ref:t},p),{},{components:n})):a.createElement(k,o({ref:t},p))}));function k(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},9641:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(87462),i=(n(67294),n(3905));const r={title:"Overview"},o="Chainhook Overview",s={unversionedId:"chainhook/index",id:"chainhook/index",title:"Overview",description:"Chainhook is a reorg-aware transaction indexing engine that helps you get reliable blockchain data, regardless of forks and reorgs. By focusing only on the data developers care about, Chainhook helps devs work with much lighter datasets and build IFTTT logic into their applications.",source:"@site/docs/chainhook/index.md",sourceDirName:"chainhook",slug:"/chainhook/",permalink:"/chainhook/",draft:!1,editUrl:"https://github.com/hirosystems/docs/tree/main/docs/chainhook/index.md",tags:[],version:"current",frontMatter:{title:"Overview"},sidebar:"chainhook",next:{title:"Getting Started",permalink:"/chainhook/getting-started"}},l={},c=[{value:"What problem does it solve?",id:"what-problem-does-it-solve",level:2},{value:"Features",id:"features",level:2},{value:"Chainhooks: Trigger IFTTT Logic in your Application",id:"chainhooks-trigger-ifttt-logic-in-your-application",level:2},{value:"Understand the Predicate Design",id:"understand-the-predicate-design",level:2},{value:"<code>if-this</code> Predicate Design",id:"if-this-predicate-design",level:3},{value:"<code>then-that</code> Predicate Design",id:"then-that-predicate-design",level:3}],p={toc:c},h="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(h,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"chainhook-overview"},"Chainhook Overview"),(0,i.kt)("p",null,"Chainhook is a reorg-aware transaction indexing engine that helps you get reliable blockchain data, regardless of forks and reorgs. By focusing only on the data developers care about, Chainhook helps devs work with much lighter datasets and build IFTTT logic into their applications."),(0,i.kt)("p",null,"Chainhook can be used as a tool in your local development environment and as a service in the cloud environment."),(0,i.kt)("h2",{id:"what-problem-does-it-solve"},"What problem does it solve?"),(0,i.kt)("p",null,"Today, Bitcoin and web3 developers struggle to get reliable blockchain data to power their applications due to forks and reorgs."),(0,i.kt)("p",null,"Developers who build applications and services often need to build their own index of the blockchain chainstate. For accurate data, they have to re-index each time there is a reorg of the chainstate, which happens often. Re-indexing is a massive pain point impacting developers building on Bitcoin."),(0,i.kt)("p",null,"With Chainhook, developers can build consistent, reorg-proof databases that index only the information they want and trigger actions in response to on-chain events using IFTTT (if_this, then_that) logic."),(0,i.kt)("h2",{id:"features"},"Features"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Faster, More Efficient Indexing:")," Instead of working with a generic blockchain indexer, taking hours to process every single transaction of every single block, you can create your own index, build, iterate, and refine it in minutes. Chainhook can help you avoid massive storage management and storage scaling issues by avoiding full chain indexation. Lighter indexes lead to faster query results, which helps minimize end-user response time. This leads to a better developer experience and a better end-user experience.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Re-org and Fork Aware:")," Chainhook stores possible chain forks and checks each new chain event against the forks to maintain the current valid fork. All triggers, also known as ",(0,i.kt)("strong",{parentName:"p"},"predicates"),", are evaluated against the current valid fork. In the event of a reorg, Chainhook computes a list of new blocks to apply and old blocks to rollback and evaluates the registered predicates against those blocks.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"IFTTT Logic, powering your applications:")," Chainhook helps developers create elegant event-based architectures using triggers, also known as ",(0,i.kt)("strong",{parentName:"p"},"predicates"),". Developers can write \u201cif_this / then_that\u201d ",(0,i.kt)("strong",{parentName:"p"},"predicates")," that when triggered, are packaged as events and forwarded to the configured destination. By using cloud functions as destinations, developers can also cut costs on processing by only paying for processing when a block that contains some data relevant to the developer's application is being mined."))),(0,i.kt)("h2",{id:"chainhooks-trigger-ifttt-logic-in-your-application"},"Chainhooks: Trigger IFTTT Logic in your Application"),(0,i.kt)("p",null,"With Chainhook, you can trigger actions based on predicates you define. Chainhooks can be triggered by events such as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A certain amount of SIP-10 tokens were transferred"),(0,i.kt)("li",{parentName:"ul"},"A particular blockchain address received some tokens on the Stacks/Bitcoin blockchain"),(0,i.kt)("li",{parentName:"ul"},"A particular print event was emitted by a contract"),(0,i.kt)("li",{parentName:"ul"},"A particular contract was involved in a transaction"),(0,i.kt)("li",{parentName:"ul"},"A quantity of BTC was received at a Bitcoin address"),(0,i.kt)("li",{parentName:"ul"},"A POX transfer occurred on the Bitcoin chain")),(0,i.kt)("h2",{id:"understand-the-predicate-design"},"Understand the Predicate Design"),(0,i.kt)("p",null,"Predicates are conditions you can define to scan the blocks easier and faster on a blockchain."),(0,i.kt)("p",null,"Predicates are defined in the If-this, then-that format. You'll write your condition in the ",(0,i.kt)("inlineCode",{parentName:"p"},"if-this")," condition template and use ",(0,i.kt)("inlineCode",{parentName:"p"},"then-that")," to output the result."),(0,i.kt)("h3",{id:"if-this-predicate-design"},(0,i.kt)("inlineCode",{parentName:"h3"},"if-this")," Predicate Design"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"if-this")," predicate design can use the following attributes to define the predicates. The 'scope' parameter is mandatory to use with any other parameters."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"scope (mandatory)"),(0,i.kt)("li",{parentName:"ul"},"equals"),(0,i.kt)("li",{parentName:"ul"},"op_return",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"ends_with"))),(0,i.kt)("li",{parentName:"ul"},"p2pkh"),(0,i.kt)("li",{parentName:"ul"},"p2sh"),(0,i.kt)("li",{parentName:"ul"},"p2wpkh"),(0,i.kt)("li",{parentName:"ul"},"operation")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "if_this": {\n    "scope": "txid",\n    "equals": "0xfaaac1833dc4883e7ec28f61e35b41f896c395f8d288b1a177155de2abd6052f"\n  }\n}\n')),(0,i.kt)("h3",{id:"then-that-predicate-design"},(0,i.kt)("inlineCode",{parentName:"h3"},"then-that")," Predicate Design"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"then-that")," predicate design can use the following attributes to output the result based on the ",(0,i.kt)("inlineCode",{parentName:"p"},"if-this")," condition defined."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"http_post",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"url"),(0,i.kt)("li",{parentName:"ul"},"authorization_header"))),(0,i.kt)("li",{parentName:"ul"},"file_append",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"path")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsonc"},'{\n  "then_that": {\n    "file_append": {\n      "path": "/tmp/events.json"\n    }\n  }\n}\n')),(0,i.kt)("p",null,"For more information on predicate definitions, refer to ",(0,i.kt)("a",{parentName:"p",href:"/chainhook/guides/chainhooks-with-bitcoin"},"how to use chainhooks with bitcoin")," and ",(0,i.kt)("a",{parentName:"p",href:"/chainhook/guides/chainhooks-with-stacks"},"how to use chainhooks with Stacks"),"."))}d.isMDXComponent=!0}}]);