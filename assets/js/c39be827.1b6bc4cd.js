"use strict";(self.webpackChunk_CapybaraIO_docs=self.webpackChunk_CapybaraIO_docs||[]).push([[8892],{3905:(t,e,n)=>{n.d(e,{Zo:()=>p,kt:()=>m});var a=n(67294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var c=a.createContext({}),s=function(t){var e=a.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},p=function(t){var e=s(t.components);return a.createElement(c.Provider,{value:e},t.children)},u="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},h=a.forwardRef((function(t,e){var n=t.components,o=t.mdxType,l=t.originalType,c=t.parentName,p=i(t,["components","mdxType","originalType","parentName"]),u=s(n),h=o,m=u["".concat(c,".").concat(h)]||u[h]||d[h]||l;return n?a.createElement(m,r(r({ref:e},p),{},{components:n})):a.createElement(m,r({ref:e},p))}));function m(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var l=n.length,r=new Array(l);r[0]=h;var i={};for(var c in e)hasOwnProperty.call(e,c)&&(i[c]=e[c]);i.originalType=t,i[u]="string"==typeof t?t:o,r[1]=i;for(var s=2;s<l;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},62769:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(87462),o=(n(67294),n(3905));const l={id:"clarity-hello-world",title:"Hello, world"},r=void 0,i={unversionedId:"tutorials/clarity-hello-world",id:"tutorials/clarity-hello-world",title:"Hello, world",description:"In the world of smart contracts, everything is a blockchain transaction. You use tokens in your wallet to deploy a",source:"@site/docs/tutorials/clarity-hello-world.md",sourceDirName:"tutorials",slug:"/tutorials/clarity-hello-world",permalink:"/doc/tutorials/clarity-hello-world",draft:!1,editUrl:"https://github.com/CapybaraIO/doc/tree/main/docs/tutorials/clarity-hello-world.md",tags:[],version:"current",lastUpdatedAt:1703206175,formattedLastUpdatedAt:"Dec 22, 2023",frontMatter:{id:"clarity-hello-world",title:"Hello, world"},sidebar:"tutorials",previous:{title:"Stacking using the Stacks CLI",permalink:"/doc/tutorials/stacking-using-cli"},next:{title:"Counter",permalink:"/doc/tutorials/clarity-counter"}},c={},s=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Optional prerequisites",id:"optional-prerequisites",level:3},{value:"Step 1: create a new project",id:"step-1-create-a-new-project",level:2},{value:"Step 2: create a new contract",id:"step-2-create-a-new-contract",level:2},{value:"Step 3: add code to the hello-world contract",id:"step-3-add-code-to-the-hello-world-contract",level:2},{value:"Step 4: interact with the contract in the Clarinet console",id:"step-4-interact-with-the-contract-in-the-clarinet-console",level:2},{value:"Optional: deploy and test the contract on the testnet",id:"optional-deploy-and-test-the-contract-on-the-testnet",level:2}],p={toc:s},u="wrapper";function d(t){let{components:e,...l}=t;return(0,o.kt)(u,(0,a.Z)({},p,l,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In the world of smart contracts, everything is a blockchain transaction. You use tokens in your wallet to deploy a\nsmart contract in a transaction, and each call to that contract after it's published is also a transaction. Because\nblock times can affect how quickly a function is executed and returned, it's advantageous to perform local development\nand testing of smart contracts with a simulated blockchain, so that functions execute immediately. This tutorial\nintroduces you to local smart contract development with ","[Clarinet][]",", a development tool for building and testing\nClarity smart contracts."),(0,o.kt)("p",null,"Clarity, the smart contract language used on the Stacks Blockchain, is a LISP-based language and uses its\nparenthesized notation. Clarity is an ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Interpreted_language"},"interpreted language"),", and\n",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Recursive_language"},"decidable"),". To learn more basics about the language, see the\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.stacks.co/docs/clarity/"},"Introduction to Clarity")," topic."),(0,o.kt)("p",null,"In this tutorial you will:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Create a new Clarinet project"),(0,o.kt)("li",{parentName:"ul"},"Add a new Clarity contract to the project"),(0,o.kt)("li",{parentName:"ul"},"Populate the contract with 2 types of functions"),(0,o.kt)("li",{parentName:"ul"},"Execute the functions in a local, simulated blockchain"),(0,o.kt)("li",{parentName:"ul"},"Optionally, deploy and test the contract on the testnet blockchain")),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"For this tutorial, you should have a local installation of Clarinet. Refer to ","[Installing Clarinet][]"," for instructions\non how to set up your local environment. You should also have a text editor or IDE to edit the Clarity smart contract."),(0,o.kt)("p",null,"If you are using the online REPL, you can skip to step 3 of the tutorial and enter the code into the sandbox."),(0,o.kt)("p",null,"If you are using Visual Studio Code, you may want to install the ","[Clarity Visual Studio Code plugin][]","."),(0,o.kt)("h3",{id:"optional-prerequisites"},"Optional prerequisites"),(0,o.kt)("p",null,"While this tutorial primarily focuses on local smart contract development, you may wish to deploy your contract to\na live blockchain. For simplicity, contract deployment is performed using the ","[testnet sandbox][]",". If you wish to\ncomplete the optional deployment step, you should have the ","[Leather wallet][]"," installed, and you should request\ntestnet STX tokens from the ","[testnet faucet][]"," on the testnet explorer. Note that requesting testnet STX from the faucet\ncan take up to 15 minutes, so you may wish to request the tokens before beginning the tutorial."),(0,o.kt)("h2",{id:"step-1-create-a-new-project"},"Step 1: create a new project"),(0,o.kt)("p",null,"With Clarinet installed locally, open a new terminal window and create a new Clarinet project with the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"clarinet new clarity-hello-world && cd clarity-hello-world\n")),(0,o.kt)("p",null,"This command creates a new directory for your smart contract project, populated with boilerplate configuration and\ntesting files. Creating a new project only creates the Clarinet configuration, in the next step you can add a contract\nto the project."),(0,o.kt)("h2",{id:"step-2-create-a-new-contract"},"Step 2: create a new contract"),(0,o.kt)("p",null,"From the ",(0,o.kt)("inlineCode",{parentName:"p"},"clarity-hello-world")," directory, create a new Clarity contract with the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"clarinet contract new hello-world\n")),(0,o.kt)("p",null,"This command adds a new ",(0,o.kt)("inlineCode",{parentName:"p"},"hello-world.clar")," file in the ",(0,o.kt)("inlineCode",{parentName:"p"},"contracts")," directory, and adds a ",(0,o.kt)("inlineCode",{parentName:"p"},"hello-world_test.ts")," file to\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"test")," directory. This tutorial ignores the test file, but for production contracts, you can create ","[unit tests][]","\nusing it."),(0,o.kt)("h2",{id:"step-3-add-code-to-the-hello-world-contract"},"Step 3: add code to the hello-world contract"),(0,o.kt)("p",null,"Open the ",(0,o.kt)("inlineCode",{parentName:"p"},"contracts/hello-world.clar")," file in a text editor or IDE. Delete the boilerplate comments, for the purpose of\nthis tutorial they're not necessary."),(0,o.kt)("p",null,"For this tutorial, you'll add two Clarity functions to the contract. Clarity functions are fully enclosed in\nparentheses, and whitespace doesn't matter."),(0,o.kt)("p",null,"The first function is a public function called ",(0,o.kt)("inlineCode",{parentName:"p"},"say-hi"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-clarity"},'(define-public (say-hi)\n  (ok "hello world"))\n')),(0,o.kt)("p",null,"Public functions in Clarity are callable from other smart contracts, which enables you to break complex tasks into\nsmaller, simpler smart contracts (an exercise in ","[separating concerns][]",")."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"To create private functions, you would use the ",(0,o.kt)("inlineCode",{parentName:"p"},"define-private")," keyword. Private functions can only be called from\nwithin the smart contract they're declared in. External contracts can only call public functions.")),(0,o.kt)("p",null,'The function doesn\'t take any parameters and simply returns "hello world" using the ',"[",(0,o.kt)("inlineCode",{parentName:"p"},"ok"),"][]"," response constructor."),(0,o.kt)("p",null,"The second function is a ","[read-only function][]"," called ",(0,o.kt)("inlineCode",{parentName:"p"},"echo-number"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-clarity"},"(define-read-only (echo-number (val int))\n  (ok val))\n")),(0,o.kt)("p",null,"Read-only functions are also public functions, but as the name implies, they can't change any variables or datamaps.\n",(0,o.kt)("inlineCode",{parentName:"p"},"echo-number")," takes an input parameter of type ",(0,o.kt)("inlineCode",{parentName:"p"},"int")," and uses an ","[",(0,o.kt)("inlineCode",{parentName:"p"},"ok"),"][]"," response to return the value passed to the\nfunction."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Clarity supports a variety of other ",(0,o.kt)("a",{parentName:"p",href:"https://docs.stacks.co/docs/clarity/language-types"},"types"))),(0,o.kt)("p",null,"The full ",(0,o.kt)("inlineCode",{parentName:"p"},"contracts/hello-world.clar")," file should look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-clarity"},'(define-public (say-hi)\n  (ok "hello world"))\n\n(define-read-only (echo-number (val int))\n  (ok val))\n')),(0,o.kt)("p",null,"In the following steps you can interact with this contract in the local console. You can optionally deploy this contract\nto the testnet and interact with it on a live blockchain."),(0,o.kt)("h2",{id:"step-4-interact-with-the-contract-in-the-clarinet-console"},"Step 4: interact with the contract in the Clarinet console"),(0,o.kt)("p",null,"In the ",(0,o.kt)("inlineCode",{parentName:"p"},"clarity-hello-world")," directory in your terminal, use the following command to verify that the syntax in\nyour contract is correct:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"clarinet check\n")),(0,o.kt)("p",null,"If there are no errors, the command returns no output. If there are errors, verify that your\ncontract is exactly as listed in the preceding section."),(0,o.kt)("p",null,"In the same directory, use the following command to launch the local console:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"clarinet console\n")),(0,o.kt)("p",null,"This console is a Clarinet read-eval-print loop (REPL) that executes Clarity code instantly when a function is called.\nWhen the Clarinet console is invoked, it provides a summary of the available contracts and the simulated wallets in\nmemory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'clarity-repl v0.11.1\nEnter "::help" for usage hints.\nConnected to a transient in-memory database.\nContracts\n+-------------------------------------------------------+-------------------------+\n| Contract identifier                                   | Public functions        |\n+-------------------------------------------------------+-------------------------+\n| ST1HTBVD3JG9C05J7HBJTHGR0GGW7KXW28M5JS8QE.hello-world | (echo-number (val int)) |\n|                                                       | (say-hi)                |\n+-------------------------------------------------------+-------------------------+\n\nInitialized balances\n+------------------------------------------------------+---------+\n| Address                                              | STX     |\n+------------------------------------------------------+---------+\n| ST1HTBVD3JG9C05J7HBJTHGR0GGW7KXW28M5JS8QE (deployer) | 1000000 |\n+------------------------------------------------------+---------+\n| ST1J4G6RR643BCG8G8SR6M2D9Z9KXT2NJDRK3FBTK (wallet_1) | 1000000 |\n+------------------------------------------------------+---------+\n| ST20ATRN26N9P05V2F1RHFRV24X8C8M3W54E427B2 (wallet_2) | 1000000 |\n+------------------------------------------------------+---------+\n| ST21HMSJATHZ888PD0S0SSTWP4J61TCRJYEVQ0STB (wallet_3) | 1000000 |\n+------------------------------------------------------+---------+\n| ST2QXSK64YQX3CQPC530K79XWQ98XFAM9W3XKEH3N (wallet_4) | 1000000 |\n+------------------------------------------------------+---------+\n| ST3DG3R65C9TTEEW5BC5XTSY0M1JM7NBE7GVWKTVJ (wallet_5) | 1000000 |\n+------------------------------------------------------+---------+\n| ST3R3B1WVY7RK5D3SV5YTH01XSX1S4NN5B3QK2X0W (wallet_6) | 1000000 |\n+------------------------------------------------------+---------+\n| ST3ZG8F9X4VKVTVQB2APF4NEYEE1HQHC2EDBF09JN (wallet_7) | 1000000 |\n+------------------------------------------------------+---------+\n| STEB8ZW46YZJ40E3P7A287RBJFWPHYNQ2AB5ECT8 (wallet_8)  | 1000000 |\n+------------------------------------------------------+---------+\n| STFCVYY1RJDNJHST7RRTPACYHVJQDJ7R1DWTQHQA (wallet_9)  | 1000000 |\n+------------------------------------------------------+---------+\n')),(0,o.kt)("p",null,"The console provides the ability to interact with your contract using Clarity commands. Call the ",(0,o.kt)("inlineCode",{parentName:"p"},"say-hi")," function\nwith the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-clarity"},"(contract-call? .hello-world say-hi)\n")),(0,o.kt)("p",null,"The console immediately returns ",(0,o.kt)("inlineCode",{parentName:"p"},'(ok "hello world")'),", the expected return value of the function."),(0,o.kt)("p",null,"Next, call the ",(0,o.kt)("inlineCode",{parentName:"p"},"echo-number")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-clarity"},"(contract-call? .hello-world echo-number 42)\n")),(0,o.kt)("p",null,"The console immediately returns ",(0,o.kt)("inlineCode",{parentName:"p"},"(ok 42)"),", the expected return value of the function with the parameters you called it\nwith."),(0,o.kt)("p",null,"Try calling the ",(0,o.kt)("inlineCode",{parentName:"p"},"echo-number")," function with an incorrect type, in this case an unsigned integer:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-clarity"},"(contract-call? .hello-world echo-number u42)\n")),(0,o.kt)("p",null,"The console should return ",(0,o.kt)("inlineCode",{parentName:"p"},"Analysis error: expecting expression of type 'int', found 'uint'"),", indicating that the call\nto the contract was invalid due to the incorrect type."),(0,o.kt)("p",null,"You have now learned the basics of Clarity and working with the Clarinet development tool. You may\nwish to optionally deploy the contract to the testnet, described in the next and final step."),(0,o.kt)("h2",{id:"optional-deploy-and-test-the-contract-on-the-testnet"},"Optional: deploy and test the contract on the testnet"),(0,o.kt)("p",null,"For this tutorial, you'll use the ","[testnet sandbox][]"," to deploy your smart contract. Make sure you have connected your\n","[Leather wallet][]"," to the sandbox using the ",(0,o.kt)("strong",{parentName:"p"},"Connect wallet")," button, then copy and paste your smart contract into\nthe Clarity code editor on the ",(0,o.kt)("strong",{parentName:"p"},"Write & Deploy")," page. Edit the contract name or use the randomly generated name\nprovided to you."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Hello world testnet sandbox",src:n(22533).Z,width:"1206",height:"280"})),(0,o.kt)("p",null,"Click ",(0,o.kt)("strong",{parentName:"p"},"Deploy")," to deploy the contract to the blockchain. This will display the Leather wallet window with\ninformation about the transaction. Verify that the transaction looks correct, and the network is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"Testnet"),", and\nclick ",(0,o.kt)("strong",{parentName:"p"},"Confirm"),"."),(0,o.kt)("p",null,"The contract is added to the miners mempool, and included in the next block of the blockchain. This process can take up\nto 15 minutes to complete. You can review it on the ","[transactions][]"," page of the explorer or in the activity field\nof your web wallet."),(0,o.kt)("p",null,"When your contract is confirmed, navigate to the ","[call a contract][]"," page of the sandbox, and search for your contract.\nEnter your wallet address in the top field, you can copy this address by clicking the Leather wallet icon and\nclicking the ",(0,o.kt)("strong",{parentName:"p"},"Copy address")," button. Enter the contract name in the bottom field, in this case ",(0,o.kt)("inlineCode",{parentName:"p"},"hello-world"),". Click\n",(0,o.kt)("strong",{parentName:"p"},"Get Contract")," to view the contract."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Hello world sandbox contract",src:n(60331).Z,width:"739",height:"362"})),(0,o.kt)("p",null,"Click the ",(0,o.kt)("inlineCode",{parentName:"p"},"say-hi")," function in the function summary, then click ",(0,o.kt)("strong",{parentName:"p"},"Call Function")," to perform the function call in the\nsandbox. This will display the Leather wallet with information about the transaction. Verify the information, then\nclick ",(0,o.kt)("strong",{parentName:"p"},"Confirm")," to execute the function call."),(0,o.kt)("p",null,"The function call is added to the miners mempool, and is executed in the next block of the blockchain. This process\ncan take up to 15 minutes to complete. You can review it on the ","[transactions][]"," page of the explorer or in the\nactivity field of your web wallet."),(0,o.kt)("p",null,"When the transaction is complete, you can access the transaction summary page from the activity panel in your web\nwallet. The transaction summary page displays the output of the function:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Hello world transaction summary",src:n(48896).Z,width:"881",height:"336"})),(0,o.kt)("p",null,"You have now learned one method of deploying and interacting with smart contracts on Stacks. You have also learned\nthe strengths of performing local development without having to wait for block times."))}d.isMDXComponent=!0},60331:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/hello-world-sandbox-contract-e959584664eccee4eb2ab58216ac16d1.png"},22533:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/hello-world-testnet-sandbox-a1227013e1b0c5ebd53db34c3f2c361d.png"},48896:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/hello-world-transaction-summary-ae208070f4f046315254e8f79c615d48.png"}}]);