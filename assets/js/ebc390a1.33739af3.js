"use strict";(self.webpackChunk_hirosystems_docs=self.webpackChunk_hirosystems_docs||[]).push([[8896],{3905:(t,e,o)=>{o.d(e,{Zo:()=>d,kt:()=>m});var n=o(67294);function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e){if(null==t)return{};var o,n,r=function(t,e){if(null==t)return{};var o,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)o=i[n],e.indexOf(o)>=0||(r[o]=t[o]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}var l=n.createContext({}),c=function(t){var e=n.useContext(l),o=e;return t&&(o="function"==typeof t?t(e):a(a({},e),t)),o},d=function(t){var e=c(t.components);return n.createElement(l.Provider,{value:e},t.children)},u="mdxType",p={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},h=n.forwardRef((function(t,e){var o=t.components,r=t.mdxType,i=t.originalType,l=t.parentName,d=s(t,["components","mdxType","originalType","parentName"]),u=c(o),h=r,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||i;return o?n.createElement(m,a(a({ref:e},d),{},{components:o})):n.createElement(m,a({ref:e},d))}));function m(t,e){var o=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=o.length,a=new Array(i);a[0]=h;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[u]="string"==typeof t?t:r,a[1]=s;for(var c=2;c<i;c++)a[c]=o[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},62175:(t,e,o)=>{o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=o(87462),r=(o(67294),o(3905));const i={title:"Stream Ordinal Activities to an API"},a=void 0,s={unversionedId:"ordhook/guides/stream-ordinal-activities",id:"ordhook/guides/stream-ordinal-activities",title:"Stream Ordinal Activities to an API",description:"Ordhook is a tool that helps you find ordinal activity from the Bitcoin chain and build your own customized database with that data. This guide will show you how to use Ordhook to stream ordinal activity.",source:"@site/docs/ordhook/guides/stream-ordinal-activities.md",sourceDirName:"ordhook/guides",slug:"/ordhook/guides/stream-ordinal-activities",permalink:"/doc/ordhook/guides/stream-ordinal-activities",draft:!1,editUrl:"https://github.com/CapybaraIO/doc/tree/main/docs/ordhook/guides/stream-ordinal-activities.md",tags:[],version:"current",lastUpdatedAt:1703206175,formattedLastUpdatedAt:"Dec 22, 2023",frontMatter:{title:"Stream Ordinal Activities to an API"},sidebar:"ordhook",previous:{title:"Scan Ordinal Activities in Your Terminal",permalink:"/doc/ordhook/guides/scan-ordinal-activities"}},l={},c=[{value:"Configure Ordhook",id:"configure-ordhook",level:3},{value:"Post Ordinal Activity to an External Endpoint",id:"post-ordinal-activity-to-an-external-endpoint",level:3}],d={toc:c},u="wrapper";function p(t){let{components:e,...o}=t;return(0,r.kt)(u,(0,n.Z)({},d,o,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Ordhook is a tool that helps you find ordinal activity from the Bitcoin chain and build your own customized database with that data. This guide will show you how to use Ordhook to stream ordinal activity."),(0,r.kt)("h3",{id:"configure-ordhook"},"Configure Ordhook"),(0,r.kt)("p",null,"This section walks you through streaming ordinal activities. To post the ordinal activity, you'll need to configure bitcoind. Refer to ",(0,r.kt)("a",{parentName:"p",href:"/doc/ordhook/guides/ordhook-as-a-service-bitcoind#setting-up-a-bitcoin-node"},"Setting up a bitcoin node")," to understand the steps to configure Bitcoind."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"NOTE")),"\nOrdhook is applicable to the Bitcoin chain only.")),(0,r.kt)("p",null,"Once the Bitcoin node is configured, you can use the following command in your terminal to create a configuration for Ordhook:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ordhook config new --mainnet")),(0,r.kt)("p",null,'You will see a success message "Created file Ordhook.toml" in your terminal.'),(0,r.kt)("p",null,"The generated ",(0,r.kt)("inlineCode",{parentName:"p"},"Ordhook.toml")," file looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'[storage]\nworking_dir = "ordhook"\n\n# The Http Api allows you to register / deregister\n# dynamically predicates.\n# Disable by default.\n#\n# [http_api]\n# http_port = 20456\n# database_uri = "redis://localhost:6379/"\n\n[network]\nmode = "mainnet"\nbitcoind_rpc_url = "http://0.0.0.0:8332"\nbitcoind_rpc_username = "devnet"\nbitcoind_rpc_password = "devnet"\n# Bitcoin block events can be received by Chainhook\n# either through a Bitcoin node\'s ZeroMQ interface,\n# or through the Stacks node. Zmq is being\n# used by default:\nbitcoind_zmq_url = "tcp://0.0.0.0:18543"\n# but stacks can also be used:\n# stacks_node_rpc_url = "http://0.0.0.0:20443"\n\n[limits]\nmax_number_of_bitcoin_predicates = 100\nmax_number_of_concurrent_bitcoin_scans = 100\nmax_number_of_processing_threads = 16\nbitcoin_concurrent_http_requests_max = 16\nmax_caching_memory_size_mb = 32000\n\n# Disable the following section if the state\n# must be built locally\n[bootstrap]\ndownload_url = "https://archive.hiro.so/mainnet/ordhook/mainnet-ordhook-sqlite-latest"\n\n[logs]\nordinals_internals = true\nchainhook_internals = true\n')),(0,r.kt)("p",null,"Observe that the bitcoind configured fields will appear in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Ordhook.toml")," file. Now, ensure that these fields are configured with the right values and URLs, as shown below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},'bitcoind_rpc_url = "http://0.0.0.0:8332"\nbitcoind_rpc_username = "devnet"\nbitcoind_rpc_password = "devnet"\nbitcoind_zmq_url = "tcp://0.0.0.0:18543"\n')),(0,r.kt)("h3",{id:"post-ordinal-activity-to-an-external-endpoint"},"Post Ordinal Activity to an External Endpoint"),(0,r.kt)("p",null,"After adjusting the ",(0,r.kt)("inlineCode",{parentName:"p"},"Ordhook.toml")," settings to make them match the bitcoind configuration, the following command can be run to scan blocks and post events to a local server:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ordhook scan blocks 767430 767753 --post-to=http://localhost:3000/api/events --config-path=./Ordhook.toml")),(0,r.kt)("p",null,"The above command uses Ordhook to stream and then post ordinal activities to ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/api/events")," where you can build out your own database or custom views."))}p.isMDXComponent=!0}}]);