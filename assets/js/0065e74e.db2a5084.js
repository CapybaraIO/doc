"use strict";(self.webpackChunk_hirosystems_docs=self.webpackChunk_hirosystems_docs||[]).push([[5659],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,c=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=l(n),k=o,m=p["".concat(c,".").concat(k)]||p[k]||u[k]||s;return n?a.createElement(m,r(r({ref:t},d),{},{components:n})):a.createElement(m,r({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,r=new Array(s);r[0]=k;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:o,r[1]=i;for(var l=2;l<s;l++)r[l]=n[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},53256:(e,t,n)=>{n.d(t,{ZP:()=>i});var a=n(87462),o=(n(67294),n(3905));const s={toc:[]},r="wrapper";function i(e){let{components:t,...n}=e;return(0,o.kt)(r,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("a",{class:"block p-4 text-neutral-800 dark:text-neutral-100 hover:bg-neutral-100 hover:dark:bg-neutral-600 bg-neutral-200 rounded-lg dark:bg-neutral-700 mb-6 hover:no-underline hover:text-neutral-800 hover:dark:text-neutral-100 transition-colors",href:"https://docs.hiro.so/stacksjs-starters"},(0,o.kt)("span",{class:"i-radix-icons-lightning-bolt align-text-bottom text-lg"})," Bootstrap your project with ",(0,o.kt)("strong",null,"Stacks.js Starters"),", which come with Stacks Connect pre-installed ",(0,o.kt)("span",{class:"i-bi-globe2 align-text-bottom text-lg"})))}i.isMDXComponent=!0},99981:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>k,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var a=n(87462),o=(n(67294),n(3905)),s=n(53256);const r={sidebar_label:"Getting Started"},i="Getting Started with Stacks.js",c={unversionedId:"stacks.js/getting-started",id:"stacks.js/getting-started",title:"Getting Started with Stacks.js",description:"To introduce the different functionality offered by Stacks.js, we'll walk through a few examples and concepts important to building on the Stacks blockchain.",source:"@site/docs/stacks.js/getting-started.md",sourceDirName:"stacks.js",slug:"/stacks.js/getting-started",permalink:"/stacks.js/getting-started",draft:!1,editUrl:"https://github.com/hirosystems/docs/tree/main/docs/stacks.js/getting-started.md",tags:[],version:"current",frontMatter:{sidebar_label:"Getting Started"},sidebar:"stacks-js",previous:{title:"Installation",permalink:"/stacks.js/installing"},next:{title:"Overview",permalink:"/stacks.js/connect"}},l={},d=[{value:"Networks",id:"networks",level:2},{value:"Accounts and Addresses",id:"accounts-and-addresses",level:2},{value:"Transactions",id:"transactions",level:2},{value:"Using Connect \ud83c\udf10",id:"using-connect-",level:3},{value:"Using a private key \ud83d\udd11",id:"using-a-private-key-",level:3},{value:"Anchor Mode / Block Type",id:"anchor-mode--block-type",level:2},{value:"Post Conditions",id:"post-conditions",level:2},{value:"Post Condition &quot;Mode&quot;",id:"post-condition-mode",level:3},{value:"Broadcasting",id:"broadcasting",level:2}],p={toc:d},u="wrapper";function k(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"getting-started-with-stacksjs"},"Getting Started with Stacks.js"),(0,o.kt)(s.ZP,{mdxType:"StacksjsStartersNote"}),(0,o.kt)("p",null,"To introduce the different functionality offered by Stacks.js, we'll walk through a few examples and concepts important to building on the Stacks blockchain."),(0,o.kt)("h2",{id:"networks"},"Networks"),(0,o.kt)("p",null,'Typically, we speak of "mainnet" and "testnet" as the networks of Stacks. Most wallets will be configured to "mainnet" by default, this is the actual blockchain that holds real STX tokens.\nAs the name suggests, "testnet" is a network for testing.\nIt\'s a separate blockchain state that holds test tokens, which have no value.'),(0,o.kt)("p",null,"Developers are encouraged to use testnet for testing before rolling out applications and contracts to mainnet.\nThere is even Devnet/Mocknet for working in a local development environment for development.\nStacks.js functions can be configured to use whichever network you want."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { StacksMainnet, StacksTestnet } from '@stacks/network';\nconst mainnet = new StacksMainnet();\nconst testnet = new StacksTestnet();\n")),(0,o.kt)("p",null,"The constructors can also be passed a custom URL to an API, if you want to use a different API than the default."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { StacksMainnet } from '@stacks/network';\nconst network = new StacksMainnet({ url: 'https://www.mystacksnode.com/' });\n")),(0,o.kt)("h2",{id:"accounts-and-addresses"},"Accounts and Addresses"),(0,o.kt)("admonition",{title:"Connect \ud83c\udf10",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For web apps, you can request the user's address via Stacks Connect. ",(0,o.kt)("a",{parentName:"p",href:"https://connect.stacks.js.org/modules/_stacks_connect#quotconnectquot-aka-authentication-showconnect"},"Read more"))),(0,o.kt)("p",null,"Stacks.js uses the concept of an \"account\" to represent a user's identity on the blockchain. An account is identified by a unique address. The address is derived from the account's public key, which is derived from the account's private key."),(0,o.kt)("p",null,"A normal mainnet address starts with ",(0,o.kt)("inlineCode",{parentName:"p"},"SP"),", and a testnet address starts with ",(0,o.kt)("inlineCode",{parentName:"p"},"ST"),".\ne.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"SP3FGQ8Z7JY9BWYZ5WM53E0M9NK7WHJF0691NZ159"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"ST2F4BK4GZH6YFBNHYDDGN4T1RKBA7DA1BJZPJEJJ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { generateSecretKey } from '@stacks/wallet-sdk';\n\nconst mnemonic = generateSecretKey();\n// aunt birth lounge misery utility blind holiday walnut fuel make gift parent gap picnic exact various express sphere family nerve oil drill engage youth\n\nconst wallet = await generateWallet({\n  secretKey: mnemonic,\n  password: 'secretpassword',\n});\n\nconst account = wallet.accounts[0];\nconst mainnetAddress = getStxAddress({ account, transactionVersion: TransactionVersion.Mainnet });\nconst testnetAddress = getStxAddress({ account, transactionVersion: TransactionVersion.Testnet });\n")),(0,o.kt)("h2",{id:"transactions"},"Transactions"),(0,o.kt)("p",null,"The following shows how to create a simple transaction (STX transfer) using Stacks.js in different environments."),(0,o.kt)("h3",{id:"using-connect-"},"Using Connect \ud83c\udf10"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { openSTXTransfer } from '@stacks/connect';\nimport { StacksTestnet } from '@stacks/network';\nimport { AnchorMode } from '@stacks/transactions';\n\nopenSTXTransfer({\n  network: new StacksTestnet(),\n\n  recipient: 'ST39MJ145BR6S8C315AG2BD61SJ16E208P1FDK3AK', // which address we are sending to\n  amount: 10000, // tokens, denominated in micro-STX\n  anchorMode: AnchorMode.Any,\n\n  onFinish: response => console.log(response.txid),\n  onCancel: () => console.log('User canceled'),\n});\n")),(0,o.kt)("h3",{id:"using-a-private-key-"},"Using a private key \ud83d\udd11"),(0,o.kt)("p",null,"For full manual transaction signing, we need to provide the sender's private key.\nTreat the private key as a secret and never expose it to the public!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { makeSTXTokenTransfer } from '@stacks/transactions';\n\nconst tx = await makeSTXTokenTransfer({\n  recipient: 'ST39MJ145BR6S8C315AG2BD61SJ16E208P1FDK3AK', // which address we are sending to\n  amount: 10000, // tokens, denominated in micro-STX\n  anchorMode: 'any',\n  senderKey: 'c3a2d3...0b1c2', // private key (typically derived from a mnemonic)\n});\n")),(0,o.kt)("h2",{id:"anchor-mode--block-type"},"Anchor Mode / Block Type"),(0,o.kt)("p",null,"In the examples above, we used ",(0,o.kt)("inlineCode",{parentName:"p"},"AnchorMode.Any"),' to indicate that the transaction can be "mined" in different ways.\nStacks has two types of blocks: microblocks and (anchor) blocks.'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Microblocks")," (off-chain) are faster, but less reliable. Microblocks can be confirmed quickly but are not final until the microblock is included in an anchor block."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Anchor Blocks")," (on-chain) are the normal Stacks block. They are slower, but more reliable. Anchor blocks are final and cannot be reverted.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// AnchorMode options\nanchorMode: "offChainOnly" | "onChainOnly" | "any",\n')),(0,o.kt)("h2",{id:"post-conditions"},"Post Conditions"),(0,o.kt)("p",null,'In Stacks, transactions can have "post conditions".\nThese are additional security to ensure the transaction was executed as expected.'),(0,o.kt)("p",null,"Post conditions can't say anything about the end-state after a transaction, but they can verify that certain things happened during the transaction."),(0,o.kt)("p",null,"More precisely, post conditions can verify that:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"STX tokens were transferred from an address"),(0,o.kt)("li",{parentName:"ul"},"FTs/NFTs we transferred from an address")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Post conditions aren't perfect and can't always guarantee the receival of FTs/NFTs, since they only check senders.")),(0,o.kt)("p",null,"An example adding a post condition (of an address sending 1000 uSTX)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { Pc } from '@stacks/transactions';\n\nconst tx = await makeContractCall({\n  // ...\n  postConditions: [\n    Pc.principal('STB44HYPYAT2BB2QE513NSP81HTMYWBJP02HPGK6').willSendEq(1000).ustx(),\n  ],\n});\n")),(0,o.kt)("h3",{id:"post-condition-mode"},'Post Condition "Mode"'),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},'...aka "allow transfer of unspecified assets?"')),(0,o.kt)("p",null,'In addition to the post conditions itself, we can also specify a "mode" for the transaction to verify asset transfers.\nThe mode can be either ',(0,o.kt)("inlineCode",{parentName:"p"},"Allow")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Deny"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Allow")," means that the transaction can transfer any asset (assuming no conflicting post conditions)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Deny")," means the transaction will fail if any asset transfers (not specified in the post conditions) are attempted.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"In either case, all post conditions will still be checked.\nBy default, transactions are set to ",(0,o.kt)("inlineCode",{parentName:"p"},"Deny")," mode for additional security.")),(0,o.kt)("h2",{id:"broadcasting"},"Broadcasting"),(0,o.kt)("admonition",{title:"Connect \ud83c\udf10",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For web apps via Stacks Connect, the users' wallet will broadcast the transaction and return a txid.\n",(0,o.kt)("a",{parentName:"p",href:"https://connect.stacks.js.org/modules/_stacks_connect"},"Read more"))),(0,o.kt)("p",null,"A finalized transaction can be broadcasted to the network or serialized (to a byte representation) using Stacks.js."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { bytesToHex } from '@stacks/common';\nimport { makeSTXTokenTransfer, broadcastTransaction, AnchorMode } from '@stacks/transactions';\n\nconst broadcastResponse = await broadcastTransaction(transaction);\nconst txId = broadcastResponse.txid;\n\nconst serializedTx = tx.serialize(); // Uint8Array\nconst serializedTxHex = bytesToHex(serializedTx); // hex string\n")))}k.isMDXComponent=!0}}]);