<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-clarinet/guides/how-to-run-integration-environment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Run local Integration Environment | capybara</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://CapybaraIO.github.io/doc/clarinet/guides/how-to-run-integration-environment"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run local Integration Environment | capybara"><meta data-rh="true" name="description" content="Once you have reached a point where your Clarity smart contract is functional, you can develop a web frontend against your contract. This can be challenging, as the contract must be deployed to a live blockchain to interact with it from a web app fully. Clarinet provides an easy method to deploy your contract to a blockchain that is configurable and controllable locally on your machine. This integration feature is called DevNet."><meta data-rh="true" property="og:description" content="Once you have reached a point where your Clarity smart contract is functional, you can develop a web frontend against your contract. This can be challenging, as the contract must be deployed to a live blockchain to interact with it from a web app fully. Clarinet provides an easy method to deploy your contract to a blockchain that is configurable and controllable locally on your machine. This integration feature is called DevNet."><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CapybaraIO.github.io/doc/clarinet/guides/how-to-run-integration-environment"><link data-rh="true" rel="alternate" href="https://CapybaraIO.github.io/doc/clarinet/guides/how-to-run-integration-environment" hreflang="en"><link data-rh="true" rel="alternate" href="https://CapybaraIO.github.io/doc/clarinet/guides/how-to-run-integration-environment" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UL2NZRAK8K-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="capybara" href="/doc/opensearch.xml">

<link rel="preconnect" href="https://cdn.segment.io">
<script>!function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){if(window.analytics.initialized)return window.analytics[t].apply(window.analytics,arguments);var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(t,a){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n),e._loadOptions=a},e._writeKey="qabJfWPhi2L9CeMk22A1XlYmabsNtgKy",e.SNIPPET_VERSION="4.16.1",e.load("qabJfWPhi2L9CeMk22A1XlYmabsNtgKy"),e.page()}}()</script>
<!-- Google Tag Manager -->
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-59XXGSG",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<!-- End Google Tag Manager --><link rel="stylesheet" href="/doc/assets/css/styles.281c0b25.css">
<link rel="preload" href="/doc/assets/js/runtime~main.0733ea05.js" as="script">
<link rel="preload" href="/doc/assets/js/main.cebadcbc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/doc/"><div class="navbar__logo"><img src="/doc/img/hiro-docs-logo.svg" alt="capybara" class="themedImage_ToTc themedImage--light_HNdA hiro-logo"><img src="/doc/img/hiro-docs-logo-dark.svg" alt="capybara" class="themedImage_ToTc themedImage--dark_i4oU hiro-logo"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link dropdown-nav">API References</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/ordinals">Ordinals API</a></li><li><a class="dropdown__link" href="/doc/api">Stacks Blockchain API</a></li><li><a class="dropdown__link" href="/doc/metadata">Token Metadata API</a></li></ul></div><a href="https://github.com/CapybaraIO/doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub Repository" aria-label="GitHub Repository"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_RiV8 docMainContainerEnhanced_u7bj"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Run local Integration Environment</h1></header><p>Once you have reached a point where your Clarity smart contract is functional, you can develop a web frontend against your contract. This can be challenging, as the contract must be deployed to a live blockchain to interact with it from a web app fully. Clarinet provides an easy method to deploy your contract to a blockchain that is configurable and controllable locally on your machine. This integration feature is called DevNet.</p><p>DevNet allows you to perform frontend development and integration testing without the need to deploy your contract to public testnet. This is valuable if you are in the early stages of developing a product, contract, or app in stealth. DevNet uses Docker to launch local instances of Bitcoin, Stacks, Stacks API, Explorer, and Bitcoin Explorer and provides total configuration control over all those instances. Once running, DevNet automatically deploys your contracts and creates Stacks accounts with pre-defined balances.</p><p>The services launched by DevNet represent a full instance of the Stacks blockchain with the Proof of Transfer consensus mechanism running against a locally running Bitcoin testnet. DevNet allows you to control block times, PoX transactions, and contract deployments. Because DevNet is running locally, it can be reset or reconfigured anytime. This allows for rapid frontend development without interacting with the public blockchain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><p>To run DevNet, you must have <a href="/doc/clarinet/getting-started">Clarinet installed</a>, and you also should have Docker installed locally. Refer to the <a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">Docker documentation</a> for instructions on installing Docker on your development machine.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="launching-devnet">Launching DevNet<a href="#launching-devnet" class="hash-link" aria-label="Direct link to Launching DevNet" title="Direct link to Launching DevNet">​</a></h2><p>Clarinet provides a sensible default configuration for DevNet. If you wish to use the default configuration, you can launch DevNet from the root of your Clarinet project with the command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">clarinet integrate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Clarinet fetches the appropriate Docker images for the Bitcoin node, Stacks node, Stacks API node, and the Bitcoin and Explorers. This can take several minutes on the first launch. Once the images are launched, the DevNet interface is displayed in your terminal window. The contracts in your project are deployed to the DevNet blockchain in the second block of the chain, so you may need to wait for the third block before launching your frontend development environment.</p><p>Review the following sections for information about the DevNet interface and configuration options for DevNet.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="devnet-interface">DevNet interface<a href="#devnet-interface" class="hash-link" aria-label="Direct link to DevNet interface" title="Direct link to DevNet interface">​</a></h2><p><img loading="lazy" alt="DevNet interface" src="/doc/assets/images/devnet-interface-71179c2080a821349e881b1196a6197f.png" width="1677" height="949" class="img_ev3q"></p><p>The DevNet interface is displayed as a terminal GUI and consists of four primary panels: the system log, service status, mempool summary, and a minimal block explorer.</p><p>The system log provides a log of events happening throughout the DevNet stack. You can use this log to monitor the health of the local blockchain and review any events that occur. For services that provide a web interface, the URL for the local service is displayed next to the container name. You can connect to these URLs using a web browser to access the service.</p><p>The service status provides a status summary for the Docker containers that make up the DevNet stack. A green icon next to the container indicates that it is in a healthy state, a yellow icon indicates that the container is booting, and a red icon indicates a problem with the service.</p><p>The mempool summary displays a list of transactions in the mempool. These include historical transactions from the beginning of the blockchain.</p><p>The block explorer has two sub-panels: the block summary and the block transactions. You can use the <code>Arrow</code> keys to select a block within the chain (shown at the top of the block explorer), and the block summary and block transactions panels display information about that block. The block summary displays the Stacks block height, the Stacks block hash, the Bitcoin block height of the anchor block, and the PoX cycle number of the block. The block transactions panel displays all Stacks transactions that were included in the block.</p><p>You can access the locally running Explorer and Bitcoin Explorer from the URLs in the service status window for more detailed information about the blocks.</p><p>You can press <code>0</code> in the interface to reset the DevNet. Press <code>Ctrl</code> + <code>C</code> to stop the DevNet and shut down the
containers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-devnet">Configuring DevNet<a href="#configuring-devnet" class="hash-link" aria-label="Direct link to Configuring DevNet" title="Direct link to Configuring DevNet">​</a></h2><p>By default, DevNet launches a local Stacks 2.0 testnet with a fixed block time of 30 seconds. It runs Docker images that host a Bitcoin node, a Stacks Node, the Stacks API, the Explorer, and the Bitcoin Explorer. The default settings should be adequate for most developers, but you can change many settings to customize your development environment.</p><p>DevNet settings are located in the <code>settings/Devnet.toml</code> file. The file defines the wallets that are created in the
DevNet blockchain, the Stacks miner configuration, Proof of Transfer activity, and many other options.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="accounts-configuration">Accounts configuration<a href="#accounts-configuration" class="hash-link" aria-label="Direct link to Accounts configuration" title="Direct link to Accounts configuration">​</a></h3><p>By default, Clarinet generates 10 wallets in the DevNet configuration file, a deployer wallet and 9 other accounts.
The accounts are seeded with a configurable balance of STX. Each wallet is defined under the heading
<code>[accounts.wallet_name]</code> in the TOML configuration file. Each heading has the following options:</p><ul><li><code>mnemonic</code>: the 24-word keyphrase used to generate the wallet address</li><li><code>balance</code>: the balance in micro-STX of the account when the blockchain starts</li></ul><p>The private key (<code>secret_key</code>), Stacks address, and BTC address are provided as comments under each wallet. These are useful for configuring stacking orders on DevNet.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="blockchain-configuration">Blockchain configuration<a href="#blockchain-configuration" class="hash-link" aria-label="Direct link to Blockchain configuration" title="Direct link to Blockchain configuration">​</a></h3><p>DevNet provides a sensible default configuration for the local blockchain, with a fixed block time of 30 seconds and
the latest development images for each of the Stacks and Bitcoin nodes. These parameters are defined under the
<code>[devnet]</code> heading. You can customize these defaults by setting any of the following parameters.</p><blockquote><p> <strong><em>NOTE:</em></strong></p><p>The default value is used if any of the parameters are not supplied in the configuration file.</p></blockquote><ul><li><code>pox_stacking_orders</code>: defined by stacking orders headings later in the file</li><li><code>orchestrator_port</code>: the port number for the Bitcoin orchestrator service</li><li><code>bitcoin_node_p2p_port</code>: the port number for Bitcoin P2P network traffic</li><li><code>bitcoin_node_rpc_port</code>: the port number for Bitcoin RPC network traffic</li><li><code>bitcoin_node_username</code>: the username for the Bitcoin node container</li><li><code>bitcoin_node_password</code>: the password for the Bitcoin node container</li><li><code>bitcoin_controller_port</code>: the port number for the Bitcoin controller network traffic</li><li><code>bitcoin_controller_block_time</code>: the fixed block time for the testnet in milliseconds</li><li><code>stacks_node_rpc_port</code>: the port number for Stacks RPC network traffic</li><li><code>stacks_node_p2p_port</code>: the port number for Stacks P2P network traffic</li><li><code>stacks_node_events_observers</code>: a whitelist of addresses for observing Stacks node events</li><li><code>stacks_api_port</code>: the port number for Stacks API network traffic</li><li><code>stacks_api_events_port</code>: the port number for Stacks API events network traffic</li><li><code>bitcoin_explorer_port</code>: the port number for Bitcoin Explorer HTTP traffic</li><li><code>stacks_explorer_port</code>: the port number for Explorer HTTP traffic</li><li><code>miner_mnemonic</code>: the 24-word keyphrase for the STX miner wallet</li><li><code>miner_derivation_path</code>: the derivation path for the STX miner</li><li><code>working_dir</code>: the local working directory for filesystem storage for the testnet</li><li><code>postgres_port</code>: the port number for the Postgres DB (for running the Stacks API)</li><li><code>postgres_username</code>: the username for the Postgres DB</li><li><code>postgres_password</code>: the password for the Postgres DB</li><li><code>postgres_database</code>: the database name of the Postgres DB</li><li><code>bitcoin_node_image_url</code>: a Docker image path for the Bitcoin node container</li><li><code>stacks_node_image_url</code>: a Docker image path for the Stacks node container</li><li><code>stacks_api_image_url</code>: a Docker image path for the Stacks API node container</li><li><code>stacks_explorer_image_url</code>: a Docker image path for the Explorer node container</li><li><code>bitcoin_explorer_image_url</code>: a Docker image path for the Bitcoin Explorer node container</li><li><code>postgres_image_url</code>: a Docker image path for the Postgres DB container</li><li><code>disable_bitcoin_explorer</code>: Boolean to set if the Bitcoin Explorer container runs in the DevNet stack</li><li><code>disable_stacks_explorer</code>: Boolean to set if the Explorer container runs in the DevNet stack</li><li><code>disable_stacks_api</code>: Boolean to set if the Stacks API container runs in the DevNet stack</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stacking-orders">Stacking orders<a href="#stacking-orders" class="hash-link" aria-label="Direct link to Stacking orders" title="Direct link to Stacking orders">​</a></h3><p>You can configure any of the wallets in the DevNet to participate in stacking to exercise the PoX contract within DevNet. This can be useful if you are developing a contract that interacts with the PoX contract and you need to set specific test conditions.</p><p>Each stacking order is defined under the heading <code>[devnet.pox_stacking_orders]</code>. This heading is repeated for as many stacking orders that are necessary for your configuration.</p><ul><li><code>start_at_cycle</code>: the stacking cycle that the wallet should start participating in. The wallet&#x27;s stacking order occurs at the block preceding the beginning of that cycle.</li><li><code>duration</code>: the stacking duration for the stacking cycle</li><li><code>wallet</code>: the alias of the wallet participating</li><li><code>slots</code>: the number of stacking slots that the wallet will participate in</li><li><code>btc_address</code>: the BTC address that stacking rewards should be sent to</li></ul><p>For more information, you can refer to the following links:</p><ul><li><a href="/doc/clarinet/getting-started">clarinet installed</a></li><li><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">docker documentation</a></li></ul></div><div style="flex-direction:row;flex-wrap:wrap"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/CapybaraIO/doc/tree/main/docs/clarinet/guides/how-to-run-integration-environment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col"></div></div></footer></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#launching-devnet" class="table-of-contents__link toc-highlight">Launching DevNet</a></li><li><a href="#devnet-interface" class="table-of-contents__link toc-highlight">DevNet interface</a></li><li><a href="#configuring-devnet" class="table-of-contents__link toc-highlight">Configuring DevNet</a><ul><li><a href="#accounts-configuration" class="table-of-contents__link toc-highlight">Accounts configuration</a></li><li><a href="#blockchain-configuration" class="table-of-contents__link toc-highlight">Blockchain configuration</a></li><li><a href="#stacking-orders" class="table-of-contents__link toc-highlight">Stacking orders</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/doc/img/hiro-docs-footer.svg" alt="Hiro developers" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/doc/img/hiro-docs-footer-light.svg" alt="Hiro developers" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright © 2023 capybara</div></div></div></footer></div>
<script src="/doc/assets/js/runtime~main.0733ea05.js"></script>
<script src="/doc/assets/js/main.cebadcbc.js"></script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-59XXGSG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --></body>
</html>